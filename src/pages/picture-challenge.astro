---
import BingoCard from '../components/BingoCard.astro';
import RulesCard from '../components/RulesCard.astro';
import Layout from '../layouts/Layout.astro';
import { generateBingoCards, pictureChallengeItems } from '../data/bingoItems';

// Generate 40 unique bingo cards on each page load
const bingoCards = generateBingoCards(pictureChallengeItems, 40);

// Group cards into pairs for A4 landscape sheets
const sheets: string[][][] = [];
for (let i = 0; i < bingoCards.length; i += 2) {
	sheets.push(bingoCards.slice(i, i + 2));
}
---

<Layout>
	{sheets.map((sheetCards, sheetIndex) => (
		<>
			{/* Bingo cards page (front) */}
			<section class="sheet">
				{sheetCards.map((items, cardIndex) => (
					<div class="bingo-cell">
						<BingoCard 
							items={items} 
							cardNumber={sheetIndex * 2 + cardIndex + 1}
						title="Foto Bingo"
						titleAccessories={{ bottom: "Grandparent Edition" }}
							description={`Du feierst die rüstigen Rentner hier? Lade deine Beweisfotos per QR-Code hoch! Wer zuerst ein Bingo hat, gewinnt eine Urkunde und einen Preis. Los geht's – mache ein Selfie mit ...`}
							qrCodeUrl='https://chat.whatsapp.com/CbtTFUshULl7INhjxsQPwN'
						/>
					</div>
				))}
			</section>
			
			{/* Rules page (back) */}
			<section class="sheet">
				<div class="bingo-cell">
					<RulesCard />
				</div>
				<div class="bingo-cell">
					<RulesCard />
				</div>
			</section>
		</>
	))}
</Layout>
